# 数据流中的第一个唯一数字

## 题目描述
给定一个数据流和一个终止数字，找到终止数字出现时数据流中的第一个唯一数字（包括终止数字）。如果找不到终止数字或没有唯一数字，返回 -1。

## 示例
输入: [1, 2, 2, 1, 3, 4, 4, 5], target = 5
输出: 3
解释: 
- 添加 1，第一个唯一数字是 1
- 添加 2，第一个唯一数字是 1
- 添加 2，第一个唯一数字是 1
- 添加 1，第一个唯一数字是 2
- 添加 3，第一个唯一数字是 3
- 添加 4，第一个唯一数字是 3
- 添加 4，第一个唯一数字是 3
- 添加 5（终止数字），第一个唯一数字是 3

## 解题思路

### 数据结构选择
使用两个主要的数据结构：
1. **计数器（哈希表）**：记录每个数字出现的次数
2. **有序字典**：维护唯一数字的插入顺序

### 实现细节

1. **数据流处理**
   - 使用计数器记录每个数字的出现次数
   - 使用OrderedDict维护唯一数字的顺序
   - 当数字出现第二次时从唯一数字集合中移除

2. **查找第一个唯一数字**
   - 直接返回OrderedDict中的第一个数字
   - 如果OrderedDict为空，返回-1

### 为什么使用OrderedDict？
- 需要维护插入顺序
- 支持O(1)的插入和删除
- Python 3.7+的普通字典也保持插入顺序，但OrderedDict更明确

### 复杂度分析
- 时间复杂度：O(n)
  - 遍历数据流：O(n)
  - 每次操作：O(1)
- 空间复杂度：O(k)
  - k是不同数字的数量
  - 最坏情况下O(n)

## 代码实现要点
1. 正确维护计数器
2. 及时更新唯一数字集合
3. 处理边界情况
4. 注意终止数字的处理

## 优化可能
1. 如果数据流很大，可以考虑定期清理计数器
2. 可以使用链表代替OrderedDict，但实现会更复杂
3. 可以考虑使用位图优化空间（如果数字范围有限） 