# 验证二叉搜索树

## 题目描述
给定一个二叉树，判断其是否是一个有效的二叉搜索树（BST）。

二叉搜索树定义：
1. 节点的左子树只包含小于当前节点的数
2. 节点的右子树只包含大于当前节点的数
3. 所有左子树和右子树自身必须也是二叉搜索树

## 示例
输入:
```
    5
   / \
  3   7
 / \ / \
1  4 6  8
```
输出: true

输入:
```
    5
   / \
  3   7
 / \ / \
1  4 2  8
```
输出: false
解释: 节点7的左子节点2小于根节点5

## 解题思路

### 递归验证范围
1. **核心思想**
   - 维护每个节点的有效值范围
   - 递归验证每个节点
   - 自顶向下传递范围约束

2. **实现细节**
```python
def validate(node, min_val, max_val):
    if not node:
        return True
        
    if node.val <= min_val or node.val >= max_val:
        return False
        
    return validate(node.left, min_val, node.val) and \
           validate(node.right, node.val, max_val)
```

### 中序遍历法（可选）
1. **核心思想**
   - BST的中序遍历是升序序列
   - 记录前一个节点的值
   - 验证是否保持升序

## 复杂度分析
- 时间复杂度：O(N)，每个节点访问一次
- 空间复杂度：O(H)，H是树的高度，递归栈深度

## 代码实现要点
1. 正确维护值范围
2. 处理空节点情况
3. 考虑边界值
4. 避免整数溢出

## 常见错误
1. 只验证与父节点的关系
2. 未考虑相等的情况
3. 范围判断错误
4. 忽略空树情况

## 优化策略
1. 使用迭代实现
2. 中序遍历优化
3. 提前返回无效情况
4. 处理特殊值

## 相关题目
1. 二叉搜索树的最近公共祖先
2. 二叉搜索树的第k小元素
3. 二叉搜索树的后继者
4. 恢复二叉搜索树 